#
# This file is a Makefile.  If it has the name "Makefile.in"
# then it is a template for a Makefile;  to generate the actual Makefile,
# run "./configure", which is a configuration script generated by the
# "autoconf" program (constructs like "@foo@" will get replaced in the
# actual Makefile.
#

# To change the compiler switches, for example to change from -O
# to -g, change the following line:
CFLAGS = -g -Wall

TCL_SRC=	@TCL_SRC_DIR@
TK_SRC =	@TK_SRC_DIR@
CC = @CC@
DEFS = @TK_DEFS@

SHLIB_LD = @SHLIB_LD@
LIBS = @TK_LIBS@
SHLIB_CFLAGS = @SHLIB_CFLAGS@
SHLIB_LD_LIBS = @SHLIB_LD_LIBS@
SHLIB_SUFFIX = @SHLIB_SUFFIX@
LD_FLAGS = @SHLIB_CFLAGS@
X11_INCLUDES = @TK_XINCLUDES@
X11_LIB_SWITCHES = @TK_XLIBSW@
TCL_LIB_SPEC = @TCL_LIB_SPEC@
TK_LIB_SPEC = @TK_LIB_SPEC@

CC_SWITCHES = $(CFLAGS) $(SHLIB_CFLAGS) $(DEFS) -I$(TCL_SRC)/unix -I$(TCL_SRC)/generic \
			 -I${TK_SRC}/generic -I${TK_SRC}/xlib/X11 ${X11_INCLUDES}
CLASSYOBJS= class.o private.o object.o method.o classyInit.o
SRCS= class.c private.c object.c method.c classyInit.c

# --------------------------- Rules -----------------------------

all: classy$(SHLIB_SUFFIX)

classy$(SHLIB_SUFFIX): $(CLASSYOBJS)
	$(SHLIB_LD) $(CFLAGS) -o ../classy$(SHLIB_SUFFIX) $(CLASSYOBJS)

classytcl: tclAppInit.o $(CLASSYOBJS)
	$(CC) $(CFLAGS) -o classytcl tclAppInit.o $(CLASSYOBJS) ${TCL_LIB_SPEC} ${LIBS}

classywish: tkAppInit.o $(CLASSYOBJS)
	$(CC) $(CFLAGS) -o classywish tkAppInit.o $(CLASSYOBJS) ${TCL_LIB_SPEC} ${TK_LIB_SPEC} ${LIBS}

clean:
	rm -f *.o ../classy$(SHLIB_SUFFIX) ../win/*.csm ../win/tmp/* ../*.dll

distclean:
	rm -f config.cache config.log config.status Makefile

depend:
	makedepend -- $(CC_SWITCHES) -- $(SRCS)

.c.o:
	$(CC) -c $(CC_SWITCHES) $<

# DO NOT DELETE THIS LINE -- make depend depends on it.


